{"componentChunkName":"component---src-templates-blog-post-js","path":"/react/in-depth-react-reconciler_3/","result":{"data":{"site":{"siteMetadata":{"title":"Deep Dive Magic Code","author":"Goidle","comment":{"utterances":"goidle/goidle.github.io"}}},"markdownRemark":{"id":"ba850fdd-61e2-5e5c-bd9b-1e6233fb55eb","excerpt":"모든 설명은 v16.12.0 버전 함수형 컴포넌트 기준입니다. 버전에 따라 코드는 변경될 수 있으며 클래스 컴포넌트는 설명에서 제외됨을 알려 드립니다. 6. reconcileChildren() fiber 확장과 관련된 일련의 함수들이(추가, 수정, 삭제..) 존재합니다. 이때 workInProgress…","html":"<blockquote>\n<p>모든 설명은 v16.12.0 버전 함수형 컴포넌트 기준입니다. 버전에 따라 코드는 변경될 수 있으며 클래스 컴포넌트는 설명에서 제외됨을 알려 드립니다.</p>\n</blockquote>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 790px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 47.22036168787676%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABKklEQVQoz4VS2W6DQBDj//8oH4AapEb5hR5qI+UAws0e43qGbkvVpH2wdgDb65khExEIsEBr0QooqwqbzQYP2y0edzvkeY79fo+iKFBfr8a5pc2sCGFBMowRbp5RlSXqukZTV6jLC7q25VnCDQOgfPLE+0WrdTKMTbPAOUQaxa6FtA3gHYUeGPoF0wjeAjkfEXhGGsfzidorjZ0lzSwujYRGXgkUaW3PfYdZDdxsF40Ue6aUaSK3RxgH+yaq0ZRmuJoD0jwSSIoUY/XNkr0+Q05HHdxP/tcM/4Bn+zoCa6vrEDhLd3iDu5wR+h7CroRp0w7uG663N46LiIiamu8j3wemDC9PiId3G8N3y7fA+eiiNJWlGD+hC9MF6WW62bThf1tO5HswHn79hx/bZsBJOgJy5wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"render phase flow\" title=\"render phase flow\" src=\"/static/ea0101d7212866b4c6776ee262f8160e/c94d1/render_phase_flow.png\" srcset=\"/static/ea0101d7212866b4c6776ee262f8160e/0780f/render_phase_flow.png 198w,\n/static/ea0101d7212866b4c6776ee262f8160e/47b26/render_phase_flow.png 395w,\n/static/ea0101d7212866b4c6776ee262f8160e/c94d1/render_phase_flow.png 790w,\n/static/ea0101d7212866b4c6776ee262f8160e/9e288/render_phase_flow.png 1185w,\n/static/ea0101d7212866b4c6776ee262f8160e/624a3/render_phase_flow.png 1493w\" sizes=\"(max-width: 790px) 100vw, 790px\" loading=\"lazy\">\n    </span>\n<h2 id=\"6-reconcilechildren\"><a href=\"#6-reconcilechildren\" aria-label=\"6 reconcilechildren permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. reconcileChildren()</h2>\n<p>fiber 확장과 관련된 일련의 함수들이(<down>추가, 수정, 삭제..</down>) 존재합니다. 이때 workInProgress가 마운트되어야 하는지 또는 재조정 작업을 거쳐야 하는지에 따라 함수 로직의 경로가 조금씩 다릅니다. 해당 함수들은 매우 비번하게 호출되는 함수들로 리액트는 컴파일러의 최적화에 도움을 주기 위해 경로가 다른 함수들을 다음과 같이 미리 분리하여 사용되도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// reconciler > ReactChildFiber.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">ChildReconciler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">shouldTrackSideEffects</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">deleteChild</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>shouldTrackSideEffects<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 마운트 환경에서의 처리 로직..</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">placeChild</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>shouldTrackSideEffects<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 생략..</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">reconcileChildFibers</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> reconcileChildFibers<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> reconcileChildFibers <span class=\"token operator\">=</span> <span class=\"token function\">ChildReconciler</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> mountChildFibers <span class=\"token operator\">=</span> <span class=\"token function\">ChildReconciler</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 함수들은 reconcileChildren()에서 다음과 같이 사용됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// reconciler > ReactFiberBeginWork.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">reconcileChildren</span><span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\">current<span class=\"token punctuation\">:</span> Fiber <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  workInProgress<span class=\"token punctuation\">:</span> Fiber<span class=\"token punctuation\">,</span>\n  nextChildren<span class=\"token punctuation\">:</span> any<span class=\"token punctuation\">,</span>\n  renderExpirationTime<span class=\"token punctuation\">:</span> ExpirationTime<span class=\"token punctuation\">,</span></span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>current <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    workInProgress<span class=\"token punctuation\">.</span>child <span class=\"token operator\">=</span> <span class=\"token function\">mountChildFibers</span><span class=\"token punctuation\">(</span>\n      workInProgress<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      nextChildren<span class=\"token punctuation\">,</span>\n      renderExpirationTime<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    workInProgress<span class=\"token punctuation\">.</span>child <span class=\"token operator\">=</span> <span class=\"token function\">reconcileChildFibers</span><span class=\"token punctuation\">(</span>\n      workInProgress<span class=\"token punctuation\">,</span>\n      current<span class=\"token punctuation\">.</span>child<span class=\"token punctuation\">,</span>\n      nextChildren<span class=\"token punctuation\">,</span>\n      renderExpirationTime<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>다음은 재조정에 대해 잠깐만 언급한 후 ChildReconciler()가 어떻게 재조정 작업을 진행 하는지 알아보겠습니다.</p>\n<h4 id=\"reconcilation\"><a href=\"#reconcilation\" aria-label=\"reconcilation permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reconcilation</h4>\n<p>재조정 작업의 목적은 VDOM 트리에서 변경이 발생한 부분을 효과적으로 비교하여 새로운 트리를 만드는 것입니다. 이때 효과적이란 최소한의 연산을 뜻하는데 리액트는 어떻게 이 부분을 해결하였는지 <a href=\"https://ko.reactjs.org/docs/reconciliation.html\" target=\"_blank\">공식홈페이지</a>에서 자세히 설명하고 있으므로 정독하고 오시면 진행하시는데 많은 도움이 될 것 같습니다. 다음은 일부분을 발췌한 내용입니다.</p>\n<blockquote>\n<p>두 가지 가정을 기반하여 O(n) 복잡도의 휴리스틱 알고리즘을 구현했습니다.  </p>\n<ol>\n<li>서로 다른 타입의 두 엘리먼트는 서로 다른 트리를 만들어낸다.</li>\n<li>개발자가 key prop을 통해, 여러 렌더링 사이에서 어떤 자식 엘리먼트가 변경되지 않아야 할지 표시해 줄 수 있다.</li>\n</ol>\n</blockquote>\n<p>핵심은 workInProgress를 만들 때 current를 재활용 할 수 있는지 혹은 새로운 fiber를 만들어 하위 트리를 재구축해야 하는지 이 두가지의 선택지에서 어떠한 근거를 가지고 선택하느냐 입니다.</p>\n<p>앞으로의 내용은 발췌한 위 영역을 어떻게 코드로 작성하였는지 분석하는 내용이 될 것입니다.</p>\n<h4 id=\"mountchildfibers-reconcilechildfibers\"><a href=\"#mountchildfibers-reconcilechildfibers\" aria-label=\"mountchildfibers reconcilechildfibers permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>mountChildFibers(), reconcileChildFibers()</h4>\n<p><code class=\"language-text\">ChildReconciler()</code>의 return 문을 보면 <code class=\"language-text\">reconcileChildFibers()</code>를 반환하고 있습니다.<br>\nmountChildFibers(), reconcileChildFibers() 모두 다 reconcileChildFibers() 이므로 출발은 해당 함수부터 시작하겠습니다.<br>\n이 함수는 컴포넌트 반환 값의 형태에 맞는 재조정 함수가 실행되도록 라우팅하는 역할만 합니다.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber 0\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// reconciler > ChildReconciler() > ReactChildFiber.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">reconcileChildFibers</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">returnFiber<span class=\"token punctuation\">,</span> currentFirstChild<span class=\"token punctuation\">,</span> newChild<span class=\"token punctuation\">,</span> expirationTime</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> isUnkeyedTopLevelFragment <span class=\"token operator\">=</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">typeof</span> newChild <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">&amp;&amp;</span></span><span class=\"gatsby-highlight-code-line\">      newChild <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span></span><span class=\"gatsby-highlight-code-line\">      newChild<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token constant\">REACT_FRAGMENT_TYPE</span> <span class=\"token operator\">&amp;&amp;</span></span><span class=\"gatsby-highlight-code-line\">      newChild<span class=\"token punctuation\">.</span>key <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isUnkeyedTopLevelFragment<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      newChild <span class=\"token operator\">=</span> newChild<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span>\n    <span class=\"token keyword\">const</span> isObject <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> newChild <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">&amp;&amp;</span> newChild <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isObject<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>newChild<span class=\"token punctuation\">.</span>$$<span class=\"token keyword\">typeof</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">case</span> <span class=\"token constant\">REACT_ELEMENT_TYPE</span><span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token keyword\">return</span> <span class=\"token function\">placeSingleChild</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token function\">reconcileSingleElement</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token comment\">// 생략..</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> newChild <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> newChild <span class=\"token operator\">===</span> <span class=\"token string\">'number'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token function\">placeSingleChild</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">reconcileSingleTextNode</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span>      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>newChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">reconcileChildrenArray</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token function\">deleteRemainingChildren</span><span class=\"token punctuation\">(</span>returnFiber<span class=\"token punctuation\">,</span> currentFirstChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>라인 4 ~ 11에서 key 설정이 되지 않은 fragment를 처리하고 있습니다. 이전에 Todo를 VDOM과 매칭시켰던 <a href=\"/react/in-depth-react-reconciler_1/#VDOM\" target=\"_blank\">이미지</a> 기억하시나요? 이때 fragment들은 다 벗겨졌었습니다. 이유는 key가 없는 fragment는 하위 컴포넌트를 묶어주는 용도로만 사용되기 때문에 굳이 fiber로 만들필요가 없습니다.<br>\n라인 10에서 바로 자식을 props에서 꺼내 재조정 작업을 하기 때문에 fragment의 fiber가 VDOM에 존재하지 않게됩니다. 만약 key가 있었다면 해당 라인에 진입하지 않으므로 fragment용 fiber가 존재했었을 것입니다.  </p>\n<p>분류는 크게 react element, text, 복수개의 자식들을 가진 배열로 나눠집니다.<br>\ntext의 경우 호스트 컴포넌트 하위에 있는 text와는 다르게 fiber로 만들어 주는 걸 확인할 수 있습니다.  </p>\n<p>복수개의 자식들은 무조건 배열에 담기므로 newChild가 배열이 아니라면 하나의 자식임을 확신할 수 있습니다.<br>\n라인 18 ~ 19, 26 ~ 27의 함수 이름을 보면 모두 single임을 확인할 수 있습니다. </p>\n<p>재조정 작업0을 진행하는 <code class=\"language-text\">reconcile***()</code> 함수가 반환하는 fiber를 <code class=\"language-text\">placeSingleChild()</code>가 받아 placement side-effect tag를 달아주게 됩니다.</p>\n<blockquote>\n<h3 id=\"side-effect\"><a href=\"#side-effect\" aria-label=\"side effect permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>side-effect</h3>\n<p>재조정 작업을 마친 fiber들은 side-effect tag가 새겨집니다. 여기서 side-effect란 VDOM 입장에서 생각하면 트리에 변경점을 불러오는 모든 행위들이 side-effect 입니다. 즉 재조정 작업은 side-effect를 낳는다고 생각할 수 있습니다.<br>\n커스텀 컴포넌트의 호출 또한 side-effect에 해당 하기 때문에 다음과 같이 tag를 설정해주었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> nextChildren <span class=\"token operator\">=</span> <span class=\"token function\">renderWithHooks</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">,</span> workInProgress<span class=\"token punctuation\">,</span> Component<span class=\"token punctuation\">,</span> nextProps<span class=\"token punctuation\">,</span>\nworkInProgress<span class=\"token punctuation\">.</span>effectTag <span class=\"token operator\">|=</span> PerformedWork<span class=\"token punctuation\">;</span></code></pre></div>\n<p>effectTag는 commit phase에서 실제 DOM을 조작할 때 사용됩니다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// reconciler > ReactChildFiber.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">placeSingleChild</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newFiber<span class=\"token punctuation\">:</span> Fiber</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> Fiber <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>shouldTrackSideEffects <span class=\"token operator\">&amp;&amp;</span> newFiber<span class=\"token punctuation\">.</span>alternate <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    newFiber<span class=\"token punctuation\">.</span>effectTag <span class=\"token operator\">=</span> Placement<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> newFiber<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마운트가 아닌 재조정 작업이 필요한 환경(<down>shouldTrackSideEffects === true</down>)인 상태에서 반환받은 fiber의 alternate<up>current</up>가 null이라는 건 컴포넌트가 변경되었다는 뜻이므로 하위 트리를 재구축 해야합니다.<br>\n새로 만든 <code class=\"language-text\">newFiber</code>로 갈아끼우기 위해 <code class=\"language-text\">Placement</code> tag를 달아줍니다.<br>\n이때 기존 fiber를 사용하지 못하는 경우를 컴포넌트의 type 또는 key의 변경이라는걸 이미 언급했습니다.</p>\n<p>다음은 분류되는 react element, text, array가 어떻게 재조정 되는데 확인하겠습니다.</p>\n<h3 id=\"react-element\"><a href=\"#react-element\" aria-label=\"react element permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>react element</h3>\n<p>단일 fiber를 만들어낼 때 가장 먼저 해야 할 일은 기존 트리를 재사용 할 수 있느냐를 판단하는 겁니다. 이는 매우 중요합니다.   </p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber 0\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// reconciler > ReactSingleElement.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">reconcileSingleElement</span><span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\">returnFiber<span class=\"token punctuation\">:</span> Fiber<span class=\"token punctuation\">,</span>\n    currentFirstChild<span class=\"token punctuation\">:</span> Fiber <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    element<span class=\"token punctuation\">:</span> ReactElement<span class=\"token punctuation\">,</span>\n    expirationTime<span class=\"token punctuation\">:</span> ExpirationTime<span class=\"token punctuation\">,</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> Fiber <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> child <span class=\"token operator\">=</span> currentFirstChild<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// fiber 재활용</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>child <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>key <span class=\"token operator\">===</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n          child<span class=\"token punctuation\">.</span>tag <span class=\"token operator\">===</span> Fragment\n<span class=\"gatsby-highlight-code-line\">            <span class=\"token operator\">?</span> element<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token constant\">REACT_FRAGMENT_TYPE</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">:</span> child<span class=\"token punctuation\">.</span>elementType <span class=\"token operator\">===</span> element<span class=\"token punctuation\">.</span>type</span>        <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">deleteRemainingChildren</span><span class=\"token punctuation\">(</span>returnFiber<span class=\"token punctuation\">,</span> child<span class=\"token punctuation\">.</span>sibling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">const</span> existing <span class=\"token operator\">=</span> <span class=\"token function\">useFiber</span><span class=\"token punctuation\">(</span>\n            child<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">            element<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token constant\">REACT_FRAGMENT_TYPE</span></span><span class=\"gatsby-highlight-code-line\">              <span class=\"token operator\">?</span> element<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token punctuation\">:</span> element<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">,</span></span>            expirationTime<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          existing<span class=\"token punctuation\">.</span>return <span class=\"token operator\">=</span> returnFiber<span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span> existing<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">deleteRemainingChildren</span><span class=\"token punctuation\">(</span>returnFiber<span class=\"token punctuation\">,</span> child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">deleteChild</span><span class=\"token punctuation\">(</span>returnFiber<span class=\"token punctuation\">,</span> child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">      child <span class=\"token operator\">=</span> child<span class=\"token punctuation\">.</span>sibling<span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// fiber 새로 생성..</span>\n  <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>element type에 대한 분기 처리가 fiber의 종류가 많음에도 불구하고 fragment에 대해서만 처리합니다. 그 이유는 fragment fiber만 유일하게 props를 다르게 다루기 때문입니다.</p>\n</blockquote>\n<ul>\n<li>\n<p>12, 36: current를 재사용하기 위해서는 현재 처리하고 있는 react element에 매칭되는 current가 필요합니다. 하지만 VDOM 트리의 해당 깊이에는 복수개의 형제들이 존재할 수도 있습니다. while문은 이 복수개의 자식들 중 현재 react element에 해당하는 current가 있는지 찾고 있는 것입니다. 재사용하기 위해서요. 만약 매칭되는 current가 없다면 fiber를 새로 만들것이고 이렇게되면 하위 트리들은 모두 current가 존재하지 않게 됩니다. 즉 하위 트리를 새롭게 재구축하게 될 것입니다. </p>\n<blockquote>\n<p>fiber를 새로 만들면 하위 트리는 자동적으로 새 fiber들로 재구축됩니다. 그 이유는 추후에 useFiber()을 확인하시면 왜 그런지 명확해질 것입니다.</p>\n</blockquote>\n</li>\n<li>\n<p>13, 35: key가 다르다면 우리가 찾는 fiber가 아니므로 지워 주기만 하면 됩니다.</p>\n<blockquote>\n<p>reconcileSingleElement()는 현재 깊이에는 하나의 자식만 존재한다는 걸 나타내므로 현재 react element와 같지 않다면 모두 지워주면 됩니다.</p>\n</blockquote>\n</li>\n<li>16 ~ 17, 30: key가 같아도 type이 다르다면 current를 버리고 다시 만듭니다. 이때 해당 current만 버리는게 아닙니다. key가 같다는 건 우리가 찾던 fiber를 나타내지만 type이 다르므로 재활용 할 수 없다는 걸 뜻하며 이를 다르게 말하면 현제 current 포함 모두 삭제되었음을 나타냅니다. 그러므로 모두 지워주는 겁니다.</li>\n<li>\n<p>19: 우리가 원하던 current를 찾았다면 30번 라인 처럼 current ‘이외’의 모든 fiber들을 지워줍니다. </p>\n<blockquote>\n<p>deleteRemainingChildren()의 두번 째 인자로 current의 형제를 넘겨주고 라인 30의 경우 current 를 넘겨주는 걸 인지하시길 바랍니다.</p>\n</blockquote>\n</li>\n<li>22 ~ 24: key, type이 모두 같다면 해당 current를 재사용 할 수 있습니다. 이때 딱 한가지 current의 데이터가 아닌 react element의 데이터를 사용해서 workInProgress를 만들어야 하는 것이 있습니다. 바로 부모가 전달해주는 데이터가 담긴 props입니다. 자식이 재조정 작업중이라는 건 부모가 업데이트되어 재호출되었다는 뜻으로 부모가 넘겨주는 props 또한 변경될수도 있음을 나타냅니다. 이 부분은 lift up을 이용한 <a href=\"/react/in-depth-react-reconciler_2/#list_up\" target=\"_blank\">경로 최적화</a>에서 활용했습니다.</li>\n<li>27: workInProgress의 return을 부모 workInProgress를 가리키도록 수정해줍니다.</li>\n</ul>\n<p>current를 재활용 하는 <code class=\"language-text\">useFiber()</code>를 확인하기 전에 fiber를 지워주는 <code class=\"language-text\">deleteRemainingChildren()</code>와 <code class=\"language-text\">deleteChild()</code>를 먼저 확인하고 넘어가겠습니다.</p>\n<h4 id=\"deleteremainingchildren-deletechild\"><a href=\"#deleteremainingchildren-deletechild\" aria-label=\"deleteremainingchildren deletechild permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>deleteRemainingChildren(), deleteChild()</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// reconciler > ReactChildFiber.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">deleteRemainingChildren</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">returnFiber<span class=\"token punctuation\">,</span> currentFirstChild</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>shouldTrackSideEffects<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 마운트 환경이라면 current가 없음을 뜻하며</span>\n    <span class=\"token comment\">// 없다면 애초에 지울 것도 없으므로 빠져나간다.</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> childToDelete <span class=\"token operator\">=</span> currentFirstChild<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>childToDelete <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">deleteChild</span><span class=\"token punctuation\">(</span>returnFiber<span class=\"token punctuation\">,</span> childToDelete<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    childToDelete <span class=\"token operator\">=</span> childToDelete<span class=\"token punctuation\">.</span>sibling<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>넘겨 받은 <code class=\"language-text\">currentFirstChild</code> 부터 시작하여 모든 형제들을 <code class=\"language-text\">deleteChild()</code>시켜 줍니다.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber 0\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// reconciler > ReactChildFiber.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">deleteChild</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">returnFiber<span class=\"token punctuation\">,</span> childToDelete</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>shouldTrackSideEffects<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// deleteRemainingChildren()와 동일</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> last <span class=\"token operator\">=</span> returnFiber<span class=\"token punctuation\">.</span>lastEffect<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>last <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    last<span class=\"token punctuation\">.</span>nextEffect <span class=\"token operator\">=</span> childToDelete<span class=\"token punctuation\">;</span>\n    returnFiber<span class=\"token punctuation\">.</span>lastEffect <span class=\"token operator\">=</span> childToDelete<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    returnFiber<span class=\"token punctuation\">.</span>firstEffect <span class=\"token operator\">=</span> returnFiber<span class=\"token punctuation\">.</span>lastEffect <span class=\"token operator\">=</span> childToDelete<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  childToDelete<span class=\"token punctuation\">.</span>nextEffect <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  childToDelete<span class=\"token punctuation\">.</span>effectTag <span class=\"token operator\">=</span> Deletion<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>아마 라인 15는 이제 이해가 가실겁니다. commit phase에서 삭제될 수 있도록 tag를 달아주는 것입니다.<br>\n근데 조금은 생소한 effect라는 단어의 속성들이 나타났습니다. effect를 설명하기에 앞서 <a href=\"https://ko.wikipedia.org/wiki/%EB%8D%95_%ED%83%80%EC%9D%B4%ED%95%91\" target=\"_blank\">Duck typing</a>에 대한 기억을 끄집어 낼 필요가 있습니다.  </p>\n<p>Duck typing에 빗대어 설명하자면 fiber는 VDOM 노드이면서 effect입니다. 왜냐면 VDOM 노드가 가지고 있어야 할 속성(<down>return, sibling, child, index..</down>)과 side effect 처리에 필요한 속성(<down>tag, stateNode<up>html element</up>, updateQueue<up>effect life cycle</up></down>)들을 모두 가지고 있기 때문입니다. 또한 effect collection(<down>nextEffect, firstEffect, lastEffect</down>)입니다.</p>\n<p>이 effect<up>fiber</up>는 추후에 completeUnitOfWork()에서 부모로 전달 되는데 이 부분에 대해서는 completeUnitOfWork()를 분석할 때 더욱 자세히 알아보기 위해 생략하겠습니다.</p>\n<p>삭제는 예외적으로 effect를 위로 올리는 시기가 조금 다릅니다. 부모로 전달하기 위해서는 completeUnitOfWork()까지 fiber<up>effect</up>가 살아 있어야하는데 문제는 삭제되는 fiber는 새롭게 만들어지는 fiber로 대체되기 때문에 지금 말고는 접근할 수 있는 시점이 없습니다. 그래서 지금 여기서 바로 부모<up>returnFiber</up>로 Deletion tag를 가지고 있는 fiber를 연결하는 겁니다.  </p>\n<p>만약 deleteRemainingChildren()를 통해 복수개의 자식이 제거되었다면 부모에는 연결 리스트로 삭제된 모든 자식들(<down>deletion tag가 새겨진 effect</down>)이 저장될 것입니다.</p>\n<p>current를 재사용하는 useFiber()의 코드는 간단합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token keyword\">function</span> <span class=\"token function\">useFiber</span><span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\">fiber<span class=\"token punctuation\">:</span> Fiber<span class=\"token punctuation\">,</span>\n    pendingProps<span class=\"token punctuation\">:</span> mixed<span class=\"token punctuation\">,</span>\n    expirationTime<span class=\"token punctuation\">:</span> ExpirationTime<span class=\"token punctuation\">,</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> Fiber <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> clone <span class=\"token operator\">=</span> <span class=\"token function\">createWorkInProgress</span><span class=\"token punctuation\">(</span>fiber<span class=\"token punctuation\">,</span> pendingProps<span class=\"token punctuation\">,</span> expirationTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    clone<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    clone<span class=\"token punctuation\">.</span>sibling <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> clone<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"/react/in-depth-react-reconciler_1#createWorkInProgress\" target=\"_blank\">createWorkInProgress()</a>는 이미 reconciler_1에서 확인했습니다.<br>\n현재 깊이에 존재하는 노드는 자신 하나이므로 위치를 나타내는 index는 0, 형제는 null입니다. index 속성은 복수개의 자식이 담겨있는 배열을 재조정할 때 이용됩니다.</p>\n<h3 id=\"text\"><a href=\"#text\" aria-label=\"text permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>text</h3>\n<h3 id=\"array\"><a href=\"#array\" aria-label=\"array permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>array</h3>\n<table>\n<thead>\n<tr>\n<th align=\"center\">목록</th>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">4</td>\n<td align=\"center\"><a href=\"/react/in-depth-react-scheduler_1/\">React 톺아보기- 04. Scheduler_1</a></td>\n</tr>\n<tr>\n<td align=\"center\">6</td>\n<td align=\"center\"><a href=\"/react/in-depth-react-reconciler/\">React 톺아보기- 05. Reconciler</a></td>\n</tr>\n</tbody>\n</table>","frontmatter":{"title":"React 톺아보기- 05. Reconciler_3","date":"2020-07-14","keywords":["리액트","react","fiber","VDOM","reconciler"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/react/in-depth-react-reconciler_3/","previous":{"fields":{"slug":"/react/in-depth-react-reconciler_2/"},"frontmatter":{"title":"React 톺아보기- 05. Reconciler_2","category":"react"}},"next":null}}}